DROP TABLE IF exists SIMPLE_EXP ;
DROP TABLE IF exists COMPLEX_EXP_GRP;
DROP TABLE IF exists COMPLEX_EXP ;
DROP TABLE IF exists POLICY ;

DROP SEQUENCE IF exists POLICY_SEQ;
DROP SEQUENCE IF exists SIMPLE_EXP_SEQ;
DROP SEQUENCE IF exists COMPLEX_EXP_GRP_SEQ;
DROP SEQUENCE IF exists COMPLEX_EXP_SEQ; 

CREATE TABLE POLICY (
    ID INT(20) NOT NULL,     
    FORMULAE VARCHAR(1000) NOT NULL,
    COMMENT VARCHAR(50),
    PRIMARY KEY (ID)
) ; 

 
CREATE SEQUENCE POLICY_SEQ 
  MINVALUE 1
  MAXVALUE 9999999999999999
  START WITH 1
  INCREMENT BY 20
  NOCACHE
  NOCYCLE
;


CREATE TABLE SIMPLE_EXP (
    ID INT(20) NOT NULL,     
    POLICY_ID INT(20) NOT NULL,
    OPERANT VARCHAR(100) NOT NULL,
    FROM_VAL VARCHAR(15) NOT NULL,
    TO_VAL VARCHAR(15),
    OPERATOR VARCHAR(50) NOT NULL,
    PRIMARY KEY (ID),
    FOREIGN KEY (POLICY_ID) REFERENCES POLICY(ID) ON DELETE CASCADE
) ; 

 
CREATE SEQUENCE SIMPLE_EXP_SEQ 
  MINVALUE 1
  MAXVALUE 9999999999999999
  START WITH 1
  INCREMENT BY 20
  NOCACHE
  NOCYCLE
;

CREATE TABLE COMPLEX_EXP_GRP (
    ID INT(20) NOT NULL,
    POLICY_ID INT(20) NOT NULL,
    OPERANT VARCHAR(100) NOT NULL,
    OPERATOR VARCHAR(50) NOT NULL,
    PRIMARY KEY (ID),
    FOREIGN KEY (POLICY_ID) REFERENCES POLICY(ID) ON DELETE CASCADE
); 

CREATE SEQUENCE COMPLEX_EXP_GRP_SEQ 
  MINVALUE 1
  MAXVALUE 9999999999999999
  START WITH 1
  INCREMENT BY 20
  NOCACHE
  NOCYCLE
;

CREATE TABLE COMPLEX_EXP(
    ID INT(20) NOT NULL,
    GROUP_ID INT(20) NOT NULL,
    VAL VARCHAR(15) NOT NULL,
    PRIMARY KEY (ID),
    FOREIGN KEY (GROUP_ID) REFERENCES COMPLEX_EXP_GRP(ID) ON DELETE CASCADE
); 

CREATE SEQUENCE COMPLEX_EXP_SEQ 
  MINVALUE 1
  MAXVALUE 9999999999999999
  START WITH 1
  INCREMENT BY 20
  NOCACHE
  NOCYCLE
;

